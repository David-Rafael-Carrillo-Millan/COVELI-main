{% extends 'body.html' %}

{% block title %}Actualizar libro{% endblock %}

{% block container %}
{% block customCSS  %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/update_b.css')}}">
{% endblock %}


<body class="body">

{#<form class="form-signin" action="{{ url_for('update_book', isbn=libro['isbn']) }}" method="POST" enctype="multipart/form-data" name="update_book" id="update_book">#}
{#    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="titulo">Título del libro</label>#}
{#        <input type="text" class="form-control" id="titulo" name="titulo" placeholder="Título"#}
{#            value="{{ request.form.get('titulo', libro['titulo']) }}" required />#}
{#    </div>#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="precio">Precio</label>#}
{#        <input type="number" class="form-control" id="precio" name="precio" placeholder="Precio"#}
{#            step="0.01" min="0" max="999" value="{{ request.form.get('precio', libro['precio']) }}" required />#}
{#    </div>#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="anoedicion">Año de edición</label>#}
{#        <input type="number" class="form-control" id="anoedicion" name="anoedicion" placeholder="Año de edición"#}
{#            value="{{ request.form.get('anoedicion', libro['anoedicion']) }}" min="1500" max="2024" required />#}
{#    </div>#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="nombres">Nombres del autor</label>#}
{#        <input type="text" class="form-control" id="nombres" name="nombres" placeholder="Nombres"#}
{#            value="{{ request.form.get('nombres', libro['autor']['nombres']) }}" required />#}
{#    </div>#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="apellidos">Apellidos del autor</label>#}
{#        <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="Apellidos"#}
{#            value="{{ request.form.get('apellidos', libro['autor']['apellidos']) }}" required />#}
{#    </div>#}
{##}
{#    <div class="form-outline mb-4">#}
{#        <label for="imagen">Actualizar imagen de portada</label>#}
{#        <input type="file" class="form-control" id="imagen" name="imagen" />#}
{#        {% if libro['imagen_portada'] %}#}
{#        <br>#}
{#        <img src="{{ url_for('static', filename='img/portadas/' + libro['imagen_portada']) }}" alt="Portada" width="100" />#}
{#        <p></p>#}
{#        {% endif %}#}
{#    </div>#}
{##}
{#    <button class="w-100 btn btn-lg btn-custom2" type="submit">Actualizar Libro</button>#}
{#</form>#}
<div class="container mt-5">
    <div class="card p-4 shadow rounded border-0" style="max-width: 700px; margin: 0 auto;">
        <h2 class="text-center mb-4">Actualizar Libro</h2>
        <form class="form-signin" action="{{ url_for('update_book', isbn=libro['isbn']) }}" method="POST" enctype="multipart/form-data" name="update_book" id="update_book">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <!-- Título -->
            <div class="form-outline mb-3">
                <label for="titulo" class="form-label">Título del libro</label>
                <input type="text" class="form-control" id="titulo" name="titulo" placeholder="Título"
                    value="{{ request.form.get('titulo', libro['titulo']) }}" required />
            </div>

            <!-- Precio -->
            <div class="form-outline mb-3">
                <label for="precio" class="form-label">Precio</label>
                <input type="number" class="form-control" id="precio" name="precio" placeholder="Precio"
                    step="0.01" min="0" max="999" value="{{ request.form.get('precio', libro['precio']) }}" required />
            </div>

            <!-- Año de edición -->
            <div class="form-outline mb-3">
                <label for="anoedicion" class="form-label">Año de edición</label>
                <input type="number" class="form-control" id="anoedicion" name="anoedicion" placeholder="Año de edición"
                    value="{{ request.form.get('anoedicion', libro['anoedicion']) }}" min="1500" max="2024" required />
            </div>

            <!-- Nombres del autor -->
            <div class="form-outline mb-3">
                <label for="nombres" class="form-label">Nombres del autor</label>
                <input type="text" class="form-control" id="nombres" name="nombres" placeholder="Nombres"
                    value="{{ request.form.get('nombres', libro['autor']['nombres']) }}" required />
            </div>

            <!-- Apellidos del autor -->
            <div class="form-outline mb-3">
                <label for="apellidos" class="form-label">Apellidos del autor</label>
                <input type="text" class="form-control" id="apellidos" name="apellidos" placeholder="Apellidos"
                    value="{{ request.form.get('apellidos', libro['autor']['apellidos']) }}" required />
            </div>

            <!-- Imagen de portada -->
            <div class="form-outline mb-4">
                <label for="imagen" class="form-label">Actualizar imagen de portada</label>
                <input type="file" class="form-control" id="imagen" name="imagen" />
                {% if libro['imagen_portada'] %}
                <div class="mt-3">
                    <img src="{{ url_for('static', filename='img/portadas/' + libro['imagen_portada']) }}"
                        alt="Portada" class="img-thumbnail" width="150" />
                </div>
                {% endif %}
            </div>

            <!-- Botón de envío -->
            <button class="btn btn-primary w-100" type="submit" style="font-size: 18px; padding: 10px 0;">Actualizar Libro</button>
        </form>
    </div>
</div>



</body>


{% endblock %}